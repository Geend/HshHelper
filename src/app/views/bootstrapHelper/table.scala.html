@*
    This template can be used like the helper._ functions defined by Play Framework.
    Example:
    {{{
        @functions.table(sessions.map(
            s => scala.collection.Map(
                "Verwendete IP" -> s.getConnectedFrom,
                "Erstellungsdatum" -> s.getIssuedAt.toString("dd.MM.yyyy - HH:mm:ss"),
                "" -> sessionButton(s).toString()
            )
        ), bordered = true)
    }}}

    Limitations at this moment:
    If one desires to define a button in a table, for an action that is tied to that row,
    the button's HTML must be given as a string, like seen above.
    That's why separating the button into a new local function makes this pattern easier to read.

    @param rows The data which should be put into the table
    @param hover Defines if hovering over a row should highlight it
    @param bordered Defines if the table should be bordered
    @param striped Defines if the rows should be striped to help distinguish them
*@
@(rows: Seq[scala.collection.Map[String, Either[String, Html]]], hover: Boolean = true, bordered: Boolean = true, striped: Boolean = false)

@import scala.collection.Map

@tableHead() = {
    <thead class="thead-dark">
        <th scope="col">#</th>
        @for((k, v) <- rows.head) {
            @if(k != "") {
                <th scope="col">@k</th>
            }
        }
    </thead>
}

@tr(i: Int, row: Map[String, Either[String, Html]]) = {
    <tr>
        <td>
        @i
        </td>
        @for((k, v) <- row) {
            <td>
                @v match {
                    case Left(value) => { @value }
                    case Right(value) => { @value }
                }
            </td>
        }
    </tr>
}

@tableBody() = {
    <tbody>
        @rows.zipWithIndex.map { case (row, i) =>
            @tr(i, row)
        }
    </tbody>
}

@generateTableClass() = {
    @scala.collection.Map(
        "table-hover" -> hover,
        "table-bordered" -> bordered,
        "table-striped" -> striped
    ).filter(t => t._2).keys.mkString(" ")
}

<div class="table-responsive">
    <table class="table @generateTableClass">
        @tableHead()
        @tableBody()
    </table>
</div>
