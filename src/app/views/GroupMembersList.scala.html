@(group: Group, members: Seq[User], notMembers: Seq[User], addUserForm: Form[dtos.AddUserToGroupDTO])

@Main("Mitglieder von: " + group.name) {
    <table>
        <thead>
            <tr>
                <td>Benutzername</td>
                <td></td>
            </tr>
        </thead>

    @for(m <- members) {
        <tr>
            <td>@m.username</td>
            <td>
                @if(policy.Specification.CanRemoveGroupMember(extension.ContextArguments.getUser().get(), group, m)) {
                    @helper.form(action = routes.GroupController.postRemoveMember(group.getId())){
                        @helper.CSRF.formField
                        <input type="hidden" name="userId" value="@m.getId()" />
                        <button type="submit">Entfernen</button>
                    }
                } else {
                    <button type="submit" disabled>Entfernen</button>
                }
            </td>
        </tr>
    }
    </table>
    @if(policy.Specification.isAllowedToAddGroupMember(extension.ContextArguments.getUser().get(),
group)) {
        <h2>Benutzer hinzufuegen</h2>
        @helper.form(action = routes.GroupController.addMember(group.getId())) {
            @helper.CSRF.formField
            @helper.select(
                field = addUserForm("userId"),
                options = notMembers.map(user => user.id.toString -> user.username),
                '_label -> "Nutzer waehlen"
            )
            <button type="submit">Nutzer hinzufuegen</button>
        }
    }
}